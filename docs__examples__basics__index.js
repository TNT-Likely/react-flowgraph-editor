(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"/7QA":function(e,t,a){"use strict";a.r(t),a.d(t,"Instance",(function(){return h})),a.d(t,"DragItem",(function(){return f}));var n=a("VTBJ"),r=a("q1tI"),o=a.n(r),i=a("MNGV"),d=a.n(i),s=a("k/Of"),c=a("8A8B"),h={};class l extends r["PureComponent"]{constructor(e){var t;super(e),t=this,this.graph={},this.containerId=Object(c["guid"])(),this.copyData={nodes:new Set,edges:new Set},this.state={editable:this.props.editable},this.initGraph=()=>{var e=this.props,t=(e.behaviors,e.width),a=e.height,n=e.data,r=e.ratio,o=void 0===r?1:r,i=e.grid,c=void 0!==i&&i,l=this.containerId,u=[];c&&u.push(new d.a.Grid);var g=new d.a.Graph({container:l,width:t,height:a,enabledStack:!0,maxZoom:1,modes:{default:[...s["DefaultBehaviors"]]},defaultNode:{type:s["NodeType"].FlowRect},defaultEdge:{type:s["EdgeType"].FlowEdge},defaultCombo:{type:s["ComboType"].FlowCombo},plugins:[...u]});g.data(n),g.render(),g.on(s["GraphCustomEvent"].onStackChange,this.handleStackChange),g.on(s["GraphCustomEvent"].onNodeselectchange,this.handleSelectedChange),h.graph=this.graph=g,this.changeZoom(o)},this.shouldChangeSize=e=>{var t=this.props,a=t.width,n=t.height;return e.width!==a||e.height!==n},this.changeSize=(e,t)=>{this.graph.changeSize(e,t)},this.shouldZoom=e=>e.ratio!==this.props.ratio,this.changeZoom=(e,t)=>{var a=this.props.onRatioChange;h.ratio=e,this.graph.zoomTo(e),t&&a&&a(e)},this.shouldChangeData=e=>JSON.stringify(e.data)!==JSON.stringify(this.props.data),this.shouldChangeEditable=e=>e.editable!==this.props.editable,this.addNode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s["NodeType"].FlowRect,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t.graph.addItem(s["ItemType"].Node,Object(n["a"])({id:Object(c["guid"])(),type:e,x:a,y:r},i),o)},this.moveNode=(e,t,a)=>{var n;null===(n=this.graph)||void 0===n||n.updateItem(e,{x:t,y:a},!1)},this.getClientRect=()=>this.graph.getContainer().getBoundingClientRect(),this.toggleEditable=e=>{var t=this.state.editable,a=void 0!==e?e:!t;return new Promise((e=>{this.setState({editable:a},(()=>{h.editable=a}))}))},this.getData=()=>{var e;return null===(e=this.graph)||void 0===e?void 0:e.save()},this.changeData=e=>{var t;null===(t=this.graph)||void 0===t||t.changeData(e,!1)},this.calculatePosition=(e,t)=>{var a=this.getClientRect(),n=a.x,r=a.y,o=h.ratio;return{x:(e-n)/o,y:(t-r)/o}},this.canUndo=()=>!!this.graph.getUndoStack().length,this.canRedo=()=>!!this.graph.getRedoStack().length,this.undo=()=>{Object(c["undo"])(this.graph)},this.redo=()=>{Object(c["redo"])(this.graph)},this.handleStackChange=()=>{var e=this.props.onStackChange,t=this.graph.getStackData(),a=t.undoStack,n=t.redoStack;e&&e({canUndo:a.length>1,canRedo:n.length>0})},this.getStackData=e=>{var t=e.getType(),a=Object(n["a"])(Object(n["a"])({},e.getModel()),{},{itemType:t});return a},this.findSelected=()=>{var e=this.graph,t=e.findAllByState(s["ItemType"].Edge,s["ItemState"].Selected).map((e=>e.getID())),a=[...e.findAllByState(s["ItemType"].Node,s["ItemState"].Selected),...e.findAllByState(s["ItemType"].Combo,s["ItemState"].Selected)].map((e=>e.getID()));return a.forEach((a=>{var n=e.findById(a).getEdges();n.forEach((e=>{t.push(e.getID())}))})),{nodes:new Set(a),edges:new Set(t)}},this.bulkUpdate=(e,t)=>{var a=this.graph,r=e.nodes,o=e.edges,i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}},d="-".concat(Math.floor(1e3*Math.random())),c=50,h=t===s["ActionType"].Add?[...r,...o]:[...o,...r];h.forEach((e=>{var r=a.findById(e),o=this.getStackData(r),h=r.getType();switch(t){case s["ActionType"].Delete:i.before["".concat(h,"s")].push(o),a.removeItem(r,!1);break;case s["ActionType"].Add:o.id+=d,h===s["ItemType"].Edge?(o.source+=d,o.target+=d):h===s["ItemType"].Node&&(o.x=(o.x||0)+c,o.y=(o.y||0)+c),i.after["".concat(h,"s")].push(Object(n["a"])(Object(n["a"])({},o),{},{sourceNode:void 0,targetNode:void 0})),a.addItem(h,o,!1);break}})),h.length&&a.pushStack(t,i)},this.deleteSelected=()=>{var e=this.findSelected();this.bulkUpdate(e,s["ActionType"].Delete)},this.copy=()=>{this.copyData=this.findSelected()},this.paste=()=>{var e=this.copyData;this.bulkUpdate(e,s["ActionType"].Add)},this.handleSelectedChange=()=>{},h.editable=e.editable,h.addNode=this.addNode.bind(this),h.moveNode=this.moveNode.bind(this),h.getData=this.getData.bind(this),h.changeData=this.changeData.bind(this),h.calculatePosition=this.calculatePosition.bind(this),h.changeZoom=this.changeZoom.bind(this),h.undo=this.undo.bind(this),h.redo=this.redo.bind(this),h.deleteSelected=this.deleteSelected.bind(this),h.copy=this.copy.bind(this),h.paste=this.paste.bind(this)}componentDidMount(){this.initGraph()}componentDidUpdate(e){this.shouldChangeSize(e)&&this.changeSize(this.props.width,this.props.height),this.shouldZoom(e)&&this.changeZoom(this.props.ratio||1),this.shouldChangeData(e)&&this.changeData(this.props.data),this.shouldChangeEditable(e)&&this.toggleEditable(this.props.editable||!1)}componentWillUnmount(){this.graph.destroy()}render(){var e=this.props.style,t=this.state.editable,a=this.containerId;return o.a.createElement("div",{id:a,className:s["PrefixCls"],style:Object(n["a"])(Object(n["a"])({},e),{},{pointerEvents:t?"all":"none"})})}}l.defaultProps={width:1200,height:600,ratio:1,editable:!0,behaviors:[]};var u=l,g=(a("kLXQ"),a("zSLb"),a("TEuP")),p=new g["default"];class f extends o.a.PureComponent{constructor(e){super(e),this.node={},this.beforeData={},this.handleMouseDown=e=>{h.editable&&(this.beforeData=h.getData(),this.node=h.addNode(this.props.type),p.start(h.graph),this.handleMouseMove(e),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))},this.handleMouseMove=e=>{var t=this.getPosition(e),a=t.x,n=t.y;h.moveNode(this.node,a,n),p.move(this.node)},this.handleMouseUp=()=>{var e=Object(c["getStackData"])(this.node);h.graph.pushStack(s["ActionType"].Add,{before:{},after:{nodes:[e]}}),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),p.end()},this.getPosition=e=>{var t=h.calculatePosition(e.clientX,e.clientY),a=t.x,n=t.y,r=this.node.getBBox(),o=r.width,i=r.height;return{x:a-.5*o,y:n-.5*i}}}componentDidMount(){}render(){var e=this.props,t=e.className,a=e.style,n=e.children;return o.a.createElement("div",{className:t,style:a,onMouseDown:this.handleMouseDown},n)}}t["default"]=u},"5vP7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Instance=void 0;var n=c(a("q1tI")),r=d(a("MNGV")),o=a("k/Of"),i=a("8A8B");function d(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}return a.default=e,t&&t.set(e,a),a}function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e){return v(e)||y(e)||m(e)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"===typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(e,t):void 0}}function y(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function v(e){if(Array.isArray(e))return b(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t,a){return t&&E(e.prototype,t),a&&E(e,a),e}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function w(e){var t=I();return function(){var a,n=M(e);if(t){var r=M(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return N(this,a)}}function N(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var D={};t.Instance=D;var P=function(e){x(a,e);var t=w(a);function a(e){var n;return S(this,a),n=t.call(this,e),n.graph={},n.containerId=(0,i.guid)(),n.copyData={nodes:new Set,edges:new Set},n.state={editable:n.props.editable},n.initGraph=function(){var e=n.props,t=(e.behaviors,e.width),a=e.height,i=e.data,d=e.ratio,s=void 0===d?1:d,c=e.grid,h=void 0!==c&&c,l=C(n),u=l.containerId,g=[];h&&g.push(new r.default.Grid);var f=new r.default.Graph({container:u,width:t,height:a,enabledStack:!0,maxZoom:1,modes:{default:p(o.DefaultBehaviors)},defaultNode:{type:o.NodeType.FlowRect},defaultEdge:{type:o.EdgeType.FlowEdge},defaultCombo:{type:o.ComboType.FlowCombo},plugins:[].concat(g)});f.data(i),f.render(),f.on(o.GraphCustomEvent.onStackChange,n.handleStackChange),f.on(o.GraphCustomEvent.onNodeselectchange,n.handleSelectedChange),D.graph=n.graph=f,n.changeZoom(s)},n.shouldChangeSize=function(e){var t=n.props,a=t.width,r=t.height;return e.width!==a||e.height!==r},n.changeSize=function(e,t){n.graph.changeSize(e,t)},n.shouldZoom=function(e){return e.ratio!==n.props.ratio},n.changeZoom=function(e,t){var a=n.props.onRatioChange;D.ratio=e,n.graph.zoomTo(e),t&&a&&a(e)},n.shouldChangeData=function(e){return JSON.stringify(e.data)!==JSON.stringify(n.props.data)},n.shouldChangeEditable=function(e){return e.editable!==n.props.editable},n.addNode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.NodeType.FlowRect,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return n.graph.addItem(o.ItemType.Node,u({id:(0,i.guid)(),type:e,x:t,y:a},d),r)},n.moveNode=function(e,t,a){var r;null===(r=n.graph)||void 0===r||r.updateItem(e,{x:t,y:a},!1)},n.getClientRect=function(){return n.graph.getContainer().getBoundingClientRect()},n.toggleEditable=function(e){var t=n.state.editable,a=void 0!==e?e:!t;return new Promise((function(e){n.setState({editable:a},(function(){D.editable=a}))}))},n.getData=function(){var e;return null===(e=n.graph)||void 0===e?void 0:e.save()},n.changeData=function(e){var t;null===(t=n.graph)||void 0===t||t.changeData(e,!1)},n.calculatePosition=function(e,t){var a=n.getClientRect(),r=a.x,o=a.y,i=D.ratio;return{x:(e-r)/i,y:(t-o)/i}},n.canUndo=function(){return!!n.graph.getUndoStack().length},n.canRedo=function(){return!!n.graph.getRedoStack().length},n.undo=function(){(0,i.undo)(n.graph)},n.redo=function(){(0,i.redo)(n.graph)},n.handleStackChange=function(){var e=n.props.onStackChange,t=n.graph.getStackData(),a=t.undoStack,r=t.redoStack;e&&e({canUndo:a.length>1,canRedo:r.length>0})},n.getStackData=function(e){var t=e.getType(),a=u(u({},e.getModel()),{},{itemType:t});return a},n.findSelected=function(){var e=C(n),t=e.graph,a=t.findAllByState(o.ItemType.Edge,o.ItemState.Selected).map((function(e){return e.getID()})),r=[].concat(p(t.findAllByState(o.ItemType.Node,o.ItemState.Selected)),p(t.findAllByState(o.ItemType.Combo,o.ItemState.Selected))).map((function(e){return e.getID()}));return r.forEach((function(e){var n=t.findById(e).getEdges();n.forEach((function(e){a.push(e.getID())}))})),{nodes:new Set(r),edges:new Set(a)}},n.bulkUpdate=function(e,t){var a=C(n),r=a.graph,i=e.nodes,d=e.edges,s={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}},c="-".concat(Math.floor(1e3*Math.random())),h=50,l=t===o.ActionType.Add?[].concat(p(i),p(d)):[].concat(p(d),p(i));l.forEach((function(e){var a=r.findById(e),i=n.getStackData(a),d=a.getType();switch(t){case o.ActionType.Delete:s.before["".concat(d,"s")].push(i),r.removeItem(a,!1);break;case o.ActionType.Add:i.id+=c,d===o.ItemType.Edge?(i.source+=c,i.target+=c):d===o.ItemType.Node&&(i.x=(i.x||0)+h,i.y=(i.y||0)+h),s.after["".concat(d,"s")].push(u(u({},i),{},{sourceNode:void 0,targetNode:void 0})),r.addItem(d,i,!1);break}})),l.length&&r.pushStack(t,s)},n.deleteSelected=function(){var e=n.findSelected();n.bulkUpdate(e,o.ActionType.Delete)},n.copy=function(){n.copyData=n.findSelected()},n.paste=function(){var e=n.copyData;n.bulkUpdate(e,o.ActionType.Add)},n.handleSelectedChange=function(){},D.editable=e.editable,D.addNode=n.addNode.bind(C(n)),D.moveNode=n.moveNode.bind(C(n)),D.getData=n.getData.bind(C(n)),D.changeData=n.changeData.bind(C(n)),D.calculatePosition=n.calculatePosition.bind(C(n)),D.changeZoom=n.changeZoom.bind(C(n)),D.undo=n.undo.bind(C(n)),D.redo=n.redo.bind(C(n)),D.deleteSelected=n.deleteSelected.bind(C(n)),D.copy=n.copy.bind(C(n)),D.paste=n.paste.bind(C(n)),n}return O(a,[{key:"componentDidMount",value:function(){this.initGraph()}},{key:"componentDidUpdate",value:function(e){this.shouldChangeSize(e)&&this.changeSize(this.props.width,this.props.height),this.shouldZoom(e)&&this.changeZoom(this.props.ratio||1),this.shouldChangeData(e)&&this.changeData(this.props.data),this.shouldChangeEditable(e)&&this.toggleEditable(this.props.editable||!1)}},{key:"componentWillUnmount",value:function(){this.graph.destroy()}},{key:"render",value:function(){var e=this.props.style,t=this.state.editable,a=this.containerId;return n.default.createElement("div",{id:a,className:o.PrefixCls,style:u(u({},e),{},{pointerEvents:t?"all":"none"})})}}]),a}(n.PureComponent);P.defaultProps={width:1200,height:600,ratio:1,editable:!0,behaviors:[]};var j=P;t.default=j},"8A8B":function(e,t,a){"use strict";a.r(t),a.d(t,"optimizeMultilineText",(function(){return s})),a.d(t,"undo",(function(){return h})),a.d(t,"redo",(function(){return l})),a.d(t,"showLabelEditor",(function(){return E})),a.d(t,"hideLabelEditor",(function(){return O})),a.d(t,"drawLine",(function(){return N})),a.d(t,"removeLine",(function(){return C})),a.d(t,"toggleLine",(function(){return I})),a.d(t,"alignTwoNodes",(function(){return M})),a.d(t,"getNodeModel",(function(){return D})),a.d(t,"getBBoxFromPoint",(function(){return k})),a.d(t,"getBBoxFromPoints",(function(){return T})),a.d(t,"isBBoxesOverlapping",(function(){return B})),a.d(t,"filterConnectPoints",(function(){return _})),a.d(t,"simplifyPolyline",(function(){return L})),a.d(t,"getSimplePolyline",(function(){return R})),a.d(t,"getExpandedBBox",(function(){return z})),a.d(t,"isHorizontalPort",(function(){return F})),a.d(t,"getExpandedBBoxPoint",(function(){return X})),a.d(t,"mergeBBox",(function(){return U})),a.d(t,"getPointsFromBBox",(function(){return Y})),a.d(t,"isPointOutsideBBox",(function(){return W})),a.d(t,"getBBoxXCrossPoints",(function(){return G})),a.d(t,"getBBoxYCrossPoints",(function(){return H})),a.d(t,"getBBoxCrossPointsByPoint",(function(){return Z})),a.d(t,"distance",(function(){return K})),a.d(t,"_costByPoints",(function(){return q})),a.d(t,"heuristicCostEstimate",(function(){return J})),a.d(t,"reconstructPath",(function(){return V})),a.d(t,"removeFrom",(function(){return Q})),a.d(t,"isSegmentsIntersected",(function(){return $})),a.d(t,"isSegmentCrossingBBox",(function(){return ee})),a.d(t,"getNeighborPoints",(function(){return te})),a.d(t,"pathFinder",(function(){return ae})),a.d(t,"isBending",(function(){return ne})),a.d(t,"getBorderRadiusPoints",(function(){return re})),a.d(t,"getPathWithBorderRadiusByPolyline",(function(){return oe})),a.d(t,"getPolylinePoints",(function(){return ie})),a.d(t,"showTooltip",(function(){return ce})),a.d(t,"hideTooltip",(function(){return he})),a.d(t,"zoomIn",(function(){return ue})),a.d(t,"zoomOut",(function(){return ge})),a.d(t,"zoomZero",(function(){return pe})),a.d(t,"guid",(function(){return fe})),a.d(t,"getDistance",(function(){return me})),a.d(t,"executeBatch",(function(){return ye})),a.d(t,"isNode",(function(){return ve})),a.d(t,"isEdge",(function(){return be})),a.d(t,"getSelectedNodes",(function(){return Se})),a.d(t,"getSelectedEdges",(function(){return Ee})),a.d(t,"clearSelectedState",(function(){return Oe})),a.d(t,"getFlowRecallEdges",(function(){return xe})),a.d(t,"getStackData",(function(){return Ae})),a.d(t,"removeAllCombo",(function(){return we}));var n=a("VTBJ"),r=a("k/Of"),o=a("uFwe"),i=document.createElement("canvas"),d=i.getContext("2d");function s(e,t,a,n){if(d){if(d.font=t,d.measureText(e).width<=n)return e;var r,i=[],s="",c=0,h=Object(o["a"])(e);try{for(h.s();!(r=h.n()).done;){var l=r.value,u=d.measureText(l),g=u.width;c+g>=n&&(i.push(s),s="",c=0),s+=l,c+=g}}catch(x){h.e(x)}finally{h.f()}if(s&&i.push(s),i.length>a){var p,f="...",m=d.measureText(f).width,y="",v=0,b=Object(o["a"])(i[a-1]);try{for(b.s();!(p=b.n()).done;){var S=p.value,E=d.measureText(S),O=E.width;if(v+O>n-m)break;y+=S,v+=O}}catch(x){b.e(x)}finally{b.f()}i=i.slice(0,a-1).concat("".concat(y).concat(f))}return i.join("\n")}}var c,h=e=>{var t=e.getUndoStack();if(t&&!(t.length<=1)){var a=t.pop();if(a){var n=a.action;e.pushStack(n,Object.assign({},a.data),"redo");var r=a.data.before;if("add"===n&&(r=a.data.after),!r)return;switch(n){case"update":Object.keys(r).forEach((t=>{var a=r[t];a&&a.forEach((t=>{e.updateItem(t.id||"",t,!1)}))}));break;case"delete":Object.keys(r).forEach((t=>{var a=r[t];a&&a.forEach((t=>{var a=t.itemType;e.addItem(a,t,!1)}))}));break;case"add":Object.keys(r).forEach((t=>{var a=r[t];a&&a.forEach((t=>{e.removeItem(t.id||"",!1)}))}));break}}}},l=e=>{var t=e.getRedoStack();if(t&&0!==t.length){var a=t.pop();if(a){var n=a.action,r=a.data.after;if(e.pushStack(n,Object.assign({},a.data)),"delete"===n&&(r=a.data.before),!r)return;switch(n){case"update":Object.keys(r).forEach((t=>{var a=r[t];a&&a.forEach((t=>{e.updateItem(t.id||"",t,!1)}))}));break;case"delete":r.edges&&r.edges.forEach((t=>{e.removeItem(t.id||"",!1)})),r.nodes&&r.nodes.forEach((t=>{e.removeItem(t.id||"",!1)})),r.combos&&r.combos.forEach((t=>{e.removeItem(t.id||"",!1)}));break;case"add":Object.keys(r).forEach((t=>{var a=r[t];a&&a.forEach((t=>{var a=t.itemType;e.addItem(a,t,!1)}))}));break;default:}}}},u=a("OBvo"),g=a.n(u),p=a("/WcD"),f=a.n(p),m=a("/7QA"),y="".concat(r["PrefixCls"],"-editable-label"),v=e=>{null===e||void 0===e||e.stopPropagation();var t=S().innerText;c&&c(t),O()},b=e=>{e.stopPropagation(),13===e.keyCode&&v()},S=()=>{var e=m["Instance"].graph,t=document.querySelector(".".concat(y));if(!t){var a=e.getContainer(),n=g()("<div class='".concat(y,"' contentEditable></div>"));return a.appendChild(n),n}return t},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=(m["Instance"].ratio,m["Instance"].graph.getContainer().getBoundingClientRect()),o=r.x,i=r.y;t.width=t.width+"px",t.height=t.height+"px",t.minWidth=t.minWidth+"px",t.minHeight=t.minHeight+"px",t.left=t.left+o+"px",t.top=t.top+i+"px";var d=S();window.requestAnimationFrame((()=>{if(c=a,d.innerHTML=e,document.addEventListener("click",v),d.addEventListener("click",(e=>e.stopPropagation())),d.addEventListener("blur",v),d.addEventListener("keydown",b),window.getSelection){d.focus();var r=window.getSelection();null===r||void 0===r||r.selectAllChildren(d)}f()(d,Object(n["a"])(Object(n["a"])({},t),{},{visibility:"visible"}))}))},O=()=>{var e=S();document.removeEventListener("click",v),e.removeEventListener("blur",v),e.removeEventListener("keydown",b),f()(e,{visibility:"hidden"})},x="x-line",A="y-line",w={lineWidth:1,stroke:"#fa3426",opacity:1},N=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fe(),r=m["Instance"].graph,o=r.getWidth(),i=r.getHeight(),d=r.getGroup(),s="x"===e,c=s?A:x,h=d.findById(a),l=()=>s?[["M",t,0],["L",t,i]]:[["M",0,t],["L",o,t]];h?h.attr(Object(n["a"])({path:l()},w)):d.addShape("path",{name:c,id:a,attrs:Object(n["a"])({path:l()},w)})},C=e=>{var t=m["Instance"].graph,a=t.getGroup(),n="x"===e?A:x,r=a.findAllByName(n);r.forEach((e=>{a.removeChild(e)}))},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=m["Instance"].graph,n=a.getGroup(),r=n.findById(e);r&&r.attr({opacity:t?1:0})},M=(e,t,a,n,r)=>{var o={left:0,middle:.5,right:1},i="x"===r?0:1,d="x"===r?e.w:e.h,s=m["Instance"].graph,c=t[a][i]-d*o[n],h={};h[r]=c,s.updateItem(e.id,h,!1)},D=e=>{var t=e.getModel(),a=t.x,n=void 0===a?0:a,r=t.y,o=void 0===r?0:r,i=t.size,d=t.id,s=0,c=0;return"number"===typeof i&&(s=i,c=i),Array.isArray(i)&&(s=i[0],c=i[1]),{id:d||"",x:n,y:o,w:s,h:c,left:[n,o],middle:[n+.5*s,o+.5*c],right:[n+s,o+c]}},P=a("ODXe"),j=a("iTfj"),k=e=>{var t=e.x,a=e.y;return{x:t,y:a,centerX:t,centerY:a,minX:t,minY:a,maxX:t,maxY:a,height:0,width:0}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],a=[];e.forEach((e=>{t.push(e.x),a.push(e.y)}));var n=Math.min.apply(Math,t),r=Math.max.apply(Math,t),o=Math.min.apply(Math,a),i=Math.max.apply(Math,a);return{centerX:(n+r)/2,centerY:(o+i)/2,maxX:r,maxY:i,minX:n,minY:o,height:i-o,width:r-n}},B=(e,t)=>2*Math.abs(e.centerX-t.centerX)<e.width+t.width&&2*Math.abs(e.centerY-t.centerY)<e.height+t.height,_=e=>{var t=[],a={};return e.forEach((e=>{var t="".concat(e.x,"-").concat(e.y);e.id=t,a[t]=e})),Object(j["a"])(a,(e=>{t.push(e)})),t},L=e=>(e=_(e),e),R=(e,t)=>[e,{x:e.x,y:t.y},t],z=(e,t)=>0===e.width&&0===e.height?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t},F=(e,t)=>{var a=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return a/t.width>n/t.height},X=(e,t)=>{var a=F(t,e);return a?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},U=(e,t)=>{var a=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),r=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(a+r)/2,centerY:(n+o)/2,minX:a,minY:n,maxX:r,maxY:o,height:o-n,width:r-a}},Y=e=>{var t=e.minX,a=e.minY,n=e.maxX,r=e.maxY;return[{x:t||0,y:a||0},{x:n||0,y:a||0},{x:n||0,y:r||0},{x:t||0,y:r||0}]},W=(e,t)=>{var a=e.x,n=e.y;return a<(t.minX||0)||a>(t.maxX||0)||n<(t.minY||0)||n>(t.maxY||0)},G=(e,t)=>t<(e.minX||0)||t>(e.maxX||0)?[]:[{x:t,y:e.minY||0},{x:t,y:e.maxY||0}],H=(e,t)=>t<(e.minY||0)||t>(e.maxY||0)?[]:[{x:e.minX||0,y:t},{x:e.maxX||0,y:t}],Z=(e,t)=>G(e,t.x).concat(H(e,t.y)),K=(e,t)=>Math.abs(e.x-t.x)+Math.abs(e.y-t.y),q=(e,t)=>{var a=-2,n=0;return t.forEach((t=>{t&&(e.x===t.x&&(n+=a),e.y===t.y&&(n+=a))})),n},J=(e,t,a,n,r)=>K(e,t)+K(e,a)+q(e,[t,a,n,r]),V=function e(t,a,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t.unshift(a[r]),n[r]&&n[r]!==r&&o<=100&&e(t,a,n,n[r],o+1)},Q=(e,t)=>{var a=e.indexOf(t);a>-1&&e.splice(a,1)},$=(e,t,a,n)=>{var r=t.x-e.x,o=t.y-e.y,i=n.x-a.x,d=n.y-a.y,s=(-o*(e.x-a.x)+r*(e.y-a.y))/(-i*o+r*d),c=(i*(e.y-a.y)-d*(e.x-a.x))/(-i*o+r*d);return s>=0&&s<=1&&c>=0&&c<=1},ee=(e,t,a)=>{if(0===a.width&&0===a.height)return!1;var n=Y(a),r=Object(P["a"])(n,4),o=r[0],i=r[1],d=r[2],s=r[3];return $(e,t,o,i)||$(e,t,o,s)||$(e,t,i,d)||$(e,t,d,s)},te=(e,t,a,n)=>{var r=[];return e.forEach((e=>{e!==t&&(e.x!==t.x&&e.y!==t.y||ee(e,t,a)||ee(e,t,n)||r.push(e))})),_(r)},ae=(e,t,a,n,r,o,i)=>{var d=[],s=[t],c={},h={},l={};h[t.id||""]=0,l[t.id||""]=J(t,a,t);var u={};e.forEach((e=>{u[e.id||""]=e}));var g=function(){var g=void 0,p=1/0;if(s.forEach((e=>{l[e.id]<p&&(p=l[e.id],g=e)})),g===a){var f=[];return V(f,u,c,a.id),{v:f}}Q(s,g),d.push(g),te(e,g,n,r).forEach((e=>{if(-1===d.indexOf(e)){-1===s.indexOf(e)&&s.push(e);var n=l[g.id]+K(g,e);h[e.id||""]&&n>=h[e.id||""]||(c[e.id||""]=g.id,h[e.id||""]=n,l[e.id||""]=h[e.id||""]+J(e,a,t,o,i))}}))};while(s.length){var p=g();if("object"===typeof p)return p.v}return[t,a]},ne=(e,t,a)=>!(e.x===t.x&&t.x===a.x||e.y===t.y&&t.y===a.y),re=(e,t,a,n)=>{var r=K(e,t),o=K(a,t);r<n&&(n=r),o<n&&(n=o);var i={x:t.x-n/r*(t.x-e.x),y:t.y-n/r*(t.y-e.y)},d={x:t.x-n/o*(t.x-a.x),y:t.y-n/o*(t.y-a.y)};return[i,d]},oe=(e,t)=>{var a=[],n=e[0];return a.push("M".concat(n.x," ").concat(n.y)),e.forEach(((n,r)=>{var o=e[r+1],i=e[r+2];if(o&&i)if(ne(n,o,i)){var d=re(n,o,i,t),s=Object(P["a"])(d,2),c=s[0],h=s[1];a.push("L".concat(c.x," ").concat(c.y)),a.push("Q".concat(o.x," ").concat(o.y," ").concat(h.x," ").concat(h.y)),a.push("L".concat(h.x," ").concat(h.y))}else a.push("L".concat(o.x," ").concat(o.y));else o&&a.push("L".concat(o.x," ").concat(o.y))})),a.join("")},ie=(e,t,a,n,r)=>{var o,i;if(a&&a.getType())if("combo"===a.getType()){var d=a.getKeyShape();o=d.getCanvasBBox()||k(e),o.centerX=(o.minX||0+(o.maxX||0))/2,o.centerY=(o.minY||0+(o.maxY||0))/2}else o=a.getBBox();else o=k(e);if(n&&n.getType())if("combo"===n.getType()){var s=n.getKeyShape();i=s.getCanvasBBox()||k(t),i.centerX=(i.minX||0+(i.maxX||0))/2,i.centerY=(i.minY||0+(i.maxY||0))/2}else i=n&&n.getBBox();else i=k(t);if(B(o,i))return L(R(e,t));var c=z(o,r),h=z(i,r);if(B(c,h))return L(R(e,t));var l=X(c,e),u=X(h,t),g=T([l,u]),p=(U(c,h),U(c,g)),f=U(h,g),m=[];m=m.concat(Y(p)),m=m.concat(Y(f));var y={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[g,p,f].forEach((e=>{m=m.concat(Z(e,y).filter((e=>W(e,c)&&W(e,h))))})),[{x:l.x,y:u.y},{x:u.x,y:l.y}].forEach((e=>{W(e,c)&&W(e,h)&&m.push(e)})),m.unshift(l),m.push(u),m=_(m);var v=ae(m,l,u,o,i,e,t);return v.unshift(e),v.push(t),v},de="".concat(r["PrefixCls"],"-tooltip"),se=()=>{var e=m["Instance"].graph,t=document.querySelector(".".concat(de));if(!t){var a=e.getContainer(),n=g()("<div class='".concat(de,"'></div>"));return a.appendChild(n),n}return t},ce=(e,t)=>{var a=m["Instance"].ratio,n=t.getBBox(),r=n.x,o=n.y,i=n.width,d=n.height,s=m["Instance"].graph.getContainer().getBoundingClientRect(),c=s.x,h=s.y,l={left:(r+i/2)*a-60+c+"px",top:(o+d+10)*a+h+"px",visibility:"visible"},u=se();window.requestAnimationFrame((()=>{u.innerHTML=e,f()(u,l)}))},he=()=>{var e=se();f()(e,{visibility:"hidden"})},le=.05,ue=()=>{var e=m["Instance"].graph.getMaxZoom(),t=m["Instance"].ratio,a=(100*t+100*le)/100;m["Instance"].changeZoom(a>e?e:a,!0)},ge=()=>{var e=m["Instance"].graph.getMinZoom(),t=m["Instance"].ratio,a=(100*t-100*le)/100;m["Instance"].changeZoom(a<e?e:a,!0)},pe=()=>{m["Instance"].changeZoom(1,!0)},fe=()=>"xxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,a="x"===e?t:3&t|8;return a.toString(16)})),me=(e,t)=>{var a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.sqrt(a*a+n*n)},ye=(e,t)=>{var a=e.get("autoPaint");e.setAutoPaint(!1),t(),e.paint(),e.setAutoPaint(a)},ve=e=>e.getType()===r["ItemType"].Node,be=e=>e.getType()===r["ItemType"].Edge,Se=e=>e.findAllByState(r["ItemType"].Node,r["ItemState"].Selected),Ee=e=>e.findAllByState(r["ItemType"].Edge,r["ItemState"].Selected),Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0,a=Se(e),n=Ee(e);ye(e,(()=>{[...a,...n].forEach((a=>{t(a)&&e.setItemState(a,r["ItemState"].Selected,!1)}))}))};function xe(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=t.getInEdges();return r.length?(r.map((r=>{var o=r.getModel().source,i=e.findById(o);n.push(r);var d=t.get("id");a.push(d),a.includes(o)||xe(e,i,a,n)})),n):[]}var Ae=e=>{var t=e.getType(),a=Object(n["a"])(Object(n["a"])({},e.getModel()),{},{itemType:t});return a},we=e=>{e.getCombos().forEach((t=>{e.uncombo(t)}))}},D4mU:function(e,t,a){"use strict";a.r(t);var n=a("ODXe"),r=a("q1tI"),o=a.n(r),i=a("mwqp"),d=a.n(i),s=(a("sFfT"),{nodes:[{id:"111",label:"hello",x:100,y:100},{id:"222",label:"hello",x:300,y:300}],edges:[{source:"111",sourceAnchor:0,target:"222",targetAnchor:0}]});t["default"]=()=>{var e=Object(r["useState"])(!1),t=Object(n["a"])(e,2),a=t[0],c=t[1],h=Object(r["useState"])(!1),l=Object(n["a"])(h,2),u=l[0],g=l[1],p=Object(r["useState"])(1),f=Object(n["a"])(p,2),m=f[0],y=f[1],v=e=>{c(e.canUndo),g(e.canRedo)};return o.a.createElement("div",null,o.a.createElement("div",{className:"toolbar"},o.a.createElement("button",{disabled:!a},"\u64a4\u9500"),o.a.createElement("button",{disabled:!u},"\u6062\u590d"),"\u5f53\u524d\u7f29\u653e\u6bd4\u4f8b: ",100*m," %"),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"dragitems"},o.a.createElement(i["DragItem"],null,"\u77e9\u5f62"),o.a.createElement(i["DragItem"],{type:"flowRoundRect"},"\u5706\u89d2\u77e9\u5f62"),o.a.createElement(i["DragItem"],{type:"flowCircle"},"\u5706\u5f62"),o.a.createElement(i["DragItem"],{type:"flowDiamond"},"\u83f1\u5f62")),o.a.createElement(d.a,{data:s,grid:!0,onStackChange:v,onRatioChange:e=>y(e)})))}},"N3+D":function(e,t,a){},TEuP:function(e,t,a){"use strict";a.r(t);var n=a("8A8B"),r=["left","middle","right"];class o{constructor(){this.nodeMaps=[]}start(e){var t=e.getNodes(),a=t.map(n["getNodeModel"]);this.nodeMaps=a}move(e){var t=this.nodeMaps,a=e.getID(),o=Object(n["getNodeModel"])(e),i=t.filter((e=>e.id!==a));i.forEach((t=>{r.forEach((a=>{this.checkLine(e,o,t,a,"x"),this.checkLine(e,o,t,a,"y")}))}))}end(){Object(n["removeLine"])("x"),Object(n["removeLine"])("y")}checkLine(e,t,a,r,o){var i="".concat(t.id,"_").concat(a.id,"_").concat(r,"_").concat(o),d=this.calcPosValuesSingle(r,e,a,o);if(d.near){var s=d.value;Object(n["drawLine"])(o,s,i),Object(n["alignTwoNodes"])(t,a,r,d.type,o)}else Object(n["toggleLine"])(i)}calcPosValuesSingle(e,t,a,o){var i=Object(n["getNodeModel"])(t),d="x"===o?0:1,s={near:!1,dist:-1,type:"",value:0},c=r.map((t=>({type:t,dist:Math.abs(i[t][d]-a[e][d])}))).sort(((e,t)=>e.dist-t.dist))[0];return c.dist<5&&(s.dist=c.dist,s.near=!0,s.type=c.type,s.value=a[e][d]),s}}t["default"]=o},"k/Of":function(e,t,a){"use strict";a.r(t),a.d(t,"BehaviorType",(function(){return n})),a.d(t,"DefaultBehaviors",(function(){return r})),a.d(t,"GraphCustomEvent",(function(){return o})),a.d(t,"ItemType",(function(){return i})),a.d(t,"NodeType",(function(){return d})),a.d(t,"ShapeType",(function(){return s})),a.d(t,"EdgeType",(function(){return c})),a.d(t,"ComboType",(function(){return h})),a.d(t,"WRAPPER_CLASS_NAME",(function(){return l})),a.d(t,"LABEL_CLASS_NAME",(function(){return u})),a.d(t,"WRAPPER_HORIZONTAL_PADDING",(function(){return g})),a.d(t,"EDGE_LABEL_CLASS_NAME",(function(){return p})),a.d(t,"EDGE_LABEL_WRAPPER_CLASS_NAME",(function(){return f})),a.d(t,"EDGE_START_PLACEHOLDER_NAME",(function(){return m})),a.d(t,"EDGE_END_PLACEHOLDER_NAME",(function(){return y})),a.d(t,"DRAGLINE_NAME",(function(){return v})),a.d(t,"DRAGLINE_INDEX",(function(){return b})),a.d(t,"ANCHOR_POINT_NAME",(function(){return S})),a.d(t,"CONTROL_POINT_NAME",(function(){return E})),a.d(t,"AnchorPointState",(function(){return O})),a.d(t,"KeyCode",(function(){return x})),a.d(t,"ActionType",(function(){return A})),a.d(t,"StackType",(function(){return w})),a.d(t,"ItemState",(function(){return N})),a.d(t,"PrefixCls",(function(){return C}));var n={DragNode:"drag-node",DragCanvas:"drag-canvas",CreateEdge:"create-edge",ClickSelect:"click-select",BrushSelect:"brush-select",DragAddNode:"drag-add-node",DragAddEdge:"drag-add-edge",DragMoveEdge:"drag-move-edge",HoverItem:"hover-item",ClickItem:"click-item",RecallEdge:"recall-edge",DragResizeNode:"drag-resize-node",MoveNode:"move-node",DragCombo:"drag-combo",ShortCuts:"short-cuts",MovePolyline:"move-polyline"},r=[n.DragAddEdge,n.DragMoveEdge,n.HoverItem,n.ClickItem,n.DragResizeNode,n.MoveNode,n.DragCombo,n.ShortCuts,n.ClickSelect,{type:n.BrushSelect,trigger:"drag"},n.MovePolyline],o={onBeforeAddItem:"beforeadditem",onAfterAddItem:"afteradditem",onBeforeRemoveItem:"beforeremoveitem",onAfterRemoveItem:"afterremoveitem",onBeforeUpdateItem:"beforeupdateitem",onAfterUpdateItem:"afterupdateitem",onBeforeItemVisibilityChange:"beforeitemvisibilitychange",onAfterItemVisibilityChange:"afteritemvisibilitychange",onBeforeItemStateChange:"beforeitemstatechange",onAfterItemStateChange:"afteritemstatechange",onBeforeRefreshItem:"beforerefreshitem",onAfterRefreshItem:"afterrefreshitem",onBeforeItemStatesClear:"beforeitemstatesclear",onAfterItemStatesClear:"afteritemstatesclear",onBeforeLayout:"beforelayout",onAfterLayout:"afterlayout",onAfterConnect:"afterconnect",onStackChange:"stackchange",onNodeselectchange:"nodeselectchange"},i={Node:"node",Edge:"edge",Combo:"combo",Group:"group"},d={Circle:"circle",Rect:"rect",Ellipse:"ellipse",Diamond:"diamond",Triangle:"triangle",Star:"star",Image:"image",ModelRect:"modelRect",FlowBase:"flowBase",FlowRect:"flowRect",FlowRoundRect:"flowRoundRect",FlowCircle:"flowCircle",FlowDiamond:"flowDiamond"},s={Circle:"circle",Rect:"rect",Ellipse:"ellipse",Polygon:"polygon",Fan:"fan",Image:"image",Marker:"marker",Path:"path",Text:"text"},c={Line:"line",Polyline:"polyline",Arc:"arc",Quadratic:"quadartic",Cubic:"cubic",CubucVertical:"cubic-vertical",CUbicHorizontal:"cubic-horizontal",Loop:"loop",FlowEdge:"flow-edge"},h={Rect:"rect",Circle:"circle",FlowCombo:"flow-combo"},l="node-wrapper",u="node-label",g=10,p="edge-label",f="edge-label-wrapper-label",m="flow-edge-start-placeholder",y="flow-edge-end-placeholder",v="edge-shape-dragline",b="draglineIndex",S="anchorPoint",E="controlPoint",O={Enabled:"enabled",Disabled:"disabled"},x={Backspace:8,Control:17,C:67,V:86,Y:89,Z:90,NumberAdd:107,Add:187,Minus:189,NumberMinus:109,Zero:48,NumberZero:96},A={Add:"add",Update:"update",Delete:"delete"},w={Undo:"undo",Redo:"redo"},N={Active:"active",ActiveAnchorPoints:"activeAnchorPoints",Selected:"selected",HighLight:"highLight",Error:"error"},C="flow-editor"},kLXQ:function(e,t,a){"use strict";a.r(t);var n=a("VTBJ"),r=a("ODXe"),o=a("MNGV"),i=a.n(o),d=a("QkVN"),s=a.n(d),c=a("Z0cm"),h=a.n(c),l=a("k/Of"),u=a("8A8B"),g=(e,t)=>{var a=e.getModel(),n=a.size,o=Object(r["a"])(n,2),i=o[0],d=o[1],s=Object(r["a"])(t,2),c=s[0],h=s[1];return{x:i*c,y:d*h,r:4,lineWidth:1,fill:"#FFFFFF",stroke:"#5AAAFF",cursor:"crosshair"}};function p(e,t){var a=t.getContainer(),r=t.getModel(),o=e.getAnchorPoints(r)||[],i=a.findAllByName(l["ANCHOR_POINT_NAME"]);o.forEach(((e,r)=>{i.length?i[r].attr(Object(n["a"])({},g(t,e))):a.addShape("circle",{name:l["ANCHOR_POINT_NAME"],attrs:Object(n["a"])({},g(t,e)),isAnchorPoint:!0,anchorPointIndex:r,anchorPointState:l["AnchorPointState"].Enabled})}))}var f=e=>{var t=e.getContainer(),a=t.findAllByName(l["ANCHOR_POINT_NAME"]);a.forEach((e=>{t.removeChild(e)}))},m=[[0,0],[0,1],[1,0],[1,1]],y=e=>{var t=e.getContainer(),a=t.findAllByName(l["CONTROL_POINT_NAME"]);a.length||m.forEach(((e,a)=>{t.addShape("rect",{name:l["CONTROL_POINT_NAME"],point:e,attrs:{width:8,height:8,lineWidth:1,fill:"#FFFFFF",stroke:"#5AAAFF",cursor:[0,3].includes(a)?"nwse-resize":"nesw-resize"}})})),v(e)},v=e=>{var t=e.getContainer(),a=e.getModel(),n=a.size,o=Object(r["a"])(n,2),i=o[0],d=o[1],s=t.findAllByName(l["CONTROL_POINT_NAME"]);m.forEach(((e,t)=>{var a=Object(r["a"])(e,2),n=a[0],o=a[1];s[t].attr({x:i*n-4,y:d*o-4})}))},b=e=>{var t=e.getContainer(),a=t.findAllByName(l["CONTROL_POINT_NAME"]);a.forEach((e=>{t.removeChild(e)}))},S={options:{wrapperStyle:{fill:"#fff",lineWidth:2,stroke:"#5487ea"},labelStyle:{fontSize:14,lineHeight:14,fill:"#000000",textAlign:"center",textBaseline:"middle"},stateStyles:{[l["ItemState"].Active]:{wrapperStyle:{},contentStyle:{},labelStyle:{}},[l["ItemState"].Selected]:{wrapperStyle:{},contentStyle:{},labelStyle:{}}}},getOptions(e){return s()({},this.options,this.getCustomConfig()||{},e)},draw(e,t){e.size=this.getSize(e);var a=this.drawWrapper(e,t);return this.drawLabel(e,t),a},setLabelText(e,t){var a=t.findByClassName(l["LABEL_CLASS_NAME"]);if(a){var n=this.getSize(e),o=Object(r["a"])(n,1),i=o[0],d=void 0===i?0:i,s=a.attr(),c=s.fontStyle,h=s.fontWeight,g=s.fontSize,p=s.fontFamily,f=e.label||"",m="".concat(c," ").concat(h," ").concat(g,"px ").concat(p);a.attr("text",Object(u["optimizeMultilineText"])(f,m,2,d-2*l["WRAPPER_HORIZONTAL_PADDING"]))}},update(e,t){var a=t.getContainer();this.setLabelText(e,a),this.updateLabel(e,a),this.updateWrapper(e,a)},setState(e,t,a){var r=a.getContainer(),o=a.getModel(),i=a.getStates()||[l["WRAPPER_CLASS_NAME"],l["LABEL_CLASS_NAME"]].forEach((e=>{var t=r.findByClassName(e),a=this.getOptions(o),d=e.split("-")[1];t.attr(Object(n["a"])({},a["".concat(d,"Style")])),i.forEach((e=>{a.stateStyles[e]&&a.stateStyles[e]["".concat(d,"Style")]&&t.attr(Object(n["a"])({},a.stateStyles[e]["".concat(d,"Style")]))}))}));e===l["ItemState"].Selected&&(t?y(a):b(a)),a.hasState(l["ItemState"].ActiveAnchorPoints)||a.hasState(l["ItemState"].Selected)?p(this,a):f(a),this.afterSetState&&this.afterSetState(e,t,a)},afterSetState(e,t,a){},getSize(e){var t=this.getOptions(e),a=t.size;return a?h()(a)?a:[a,a]:a},getCustomConfig(){return{}},getAnchorPoints(){return[[.5,0],[1,.5],[.5,1],[0,.5]]}};i.a.registerNode(l["NodeType"].FlowBase,S);var E={drawWrapper(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=this.getOptions(e),c=s.wrapperStyle,h=t.addShape("rect",{className:l["WRAPPER_CLASS_NAME"],draggable:!0,attrs:Object(n["a"])({x:0,y:0,width:i,height:d},c)});return h},drawLabel(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=this.getOptions(e),c=s.labelStyle,h=t.addShape("text",{className:l["LABEL_CLASS_NAME"],draggable:!0,attrs:Object(n["a"])({x:i/2,y:d/2,text:e.label||""},c)});return h},updateLabel(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=t.findByClassName(l["LABEL_CLASS_NAME"]),c=this.getOptions(e),h=c.labelStyle;s.attr(Object(n["a"])(Object(n["a"])({},h),{},{x:i/2,y:d/2}))},updateWrapper(e,t){var a=t.findByClassName(l["WRAPPER_CLASS_NAME"]),o=this.getSize(e),i=Object(r["a"])(o,2),d=i[0],s=i[1],c=this.getOptions(e),h=c.wrapperStyle;a.attr(Object(n["a"])(Object(n["a"])({},h),{},{width:d,height:s}))},getCustomConfig(){return{size:[120,60]}}};i.a.registerNode(l["NodeType"].FlowRect,E,l["NodeType"].FlowBase);var O={getCustomConfig(){return{size:[120,60],wrapperStyle:{radius:8}}}};i.a.registerNode(l["NodeType"].FlowRoundRect,O,l["NodeType"].FlowRect);var x={drawWrapper(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=this.getOptions(e),c=s.wrapperStyle,h=t.addShape(l["NodeType"].Ellipse,{className:l["WRAPPER_CLASS_NAME"],draggable:!0,attrs:Object(n["a"])({x:i/2,y:d/2,rx:i/2,ry:d/2},c)});return h},drawLabel(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=this.getOptions(e),c=s.labelStyle,h=t.addShape("text",{className:l["LABEL_CLASS_NAME"],draggable:!0,attrs:Object(n["a"])({x:i/2,y:d/2,text:e.label||""},c)});return h},updateWrapper(e,t){var a=t.findByClassName(l["WRAPPER_CLASS_NAME"]),o=this.getSize(e),i=Object(r["a"])(o,2),d=i[0],s=i[1],c=this.getOptions(e),h=c.wrapperStyle;a.attr(Object(n["a"])(Object(n["a"])({},h),{},{x:d/2,y:s/2,rx:d/2,ry:s/2}))},updateLabel(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=t.findByClassName(l["LABEL_CLASS_NAME"]),c=this.getOptions(e),h=c.labelStyle;s.attr(Object(n["a"])(Object(n["a"])({},h),{},{x:i/2,y:d/2}))},getCustomConfig(){return{size:[120,120]}}};i.a.registerNode(l["NodeType"].FlowCircle,x,l["NodeType"].FlowBase);var A={drawWrapper(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=this.getOptions(e),c=s.wrapperStyle,h=t.addShape(l["ShapeType"].Polygon,{className:l["WRAPPER_CLASS_NAME"],draggable:!0,attrs:Object(n["a"])({points:[[0,d/2],[i/2,0],[i,d/2],[i/2,d]]},c)});return h},drawLabel(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=this.getOptions(e),c=s.labelStyle,h=t.addShape("text",{className:l["LABEL_CLASS_NAME"],draggable:!0,attrs:Object(n["a"])({x:i/2,y:d/2,text:e.label||""},c)});return h},updateWrapper(e,t){var a=t.findByClassName(l["WRAPPER_CLASS_NAME"]),o=this.getSize(e),i=Object(r["a"])(o,2),d=i[0],s=i[1],c=this.getOptions(e),h=c.wrapperStyle;a.attr(Object(n["a"])(Object(n["a"])({},h),{},{points:[[0,s/2],[d/2,0],[d,s/2],[d/2,s]]}))},updateLabel(e,t){var a=this.getSize(e),o=Object(r["a"])(a,2),i=o[0],d=o[1],s=t.findByClassName(l["LABEL_CLASS_NAME"]),c=this.getOptions(e),h=c.labelStyle;s.attr(Object(n["a"])(Object(n["a"])({},h),{},{x:i/2,y:d/2}))},getCustomConfig(){return{size:[120,120]}}};i.a.registerNode(l["NodeType"].FlowDiamond,A,l["NodeType"].FlowBase);var w=24,N={width:w,height:w,lineWidth:1,stroke:"#5AAAFF",fill:"#fff",cursor:"move",opacity:0},C=2,I="edge-shape",M={lineWidth:2,stroke:"#fa3246",lineAppendWidth:5,opacity:0},D={options:{style:{stroke:"#ccc1d8",lineAppendWidth:5,lineWidth:2,shadowColor:null,shadowBlur:4,radius:8,offset:24,endArrow:{path:"M 0,0 L 4,3 L 4,-3 Z"},cursor:"pointer"},labelCfg:{style:{fill:"#000000",fontSize:14,lineHeight:14,cursor:"pointer",background:{padding:[0,0,0,0],fill:"#fff"}}},routeCfg:{},stateStyles:{[l["ItemState"].Selected]:{stroke:"#5aaaff",shadowColor:"#5aaaff",shadowBlur:24},[l["ItemState"].HighLight]:{stroke:"#5aaaff",shadowColor:"#5aaaff",shadowBlur:24}}},getPath(e,t,a,n,r){if(this.cfg.nowPath)return this.cfg.nowPath;var o=30,i=Object(u["getPolylinePoints"])(e[0],e[1],t,a,o),d=[];return i.forEach(((e,t)=>{0===t?d.push(["M",e.x,e.y]):d.push(["L",e.x,e.y])})),d},drawShape(e,t){this.cfg=e;var a=this.getShapeStyle(e);e.path&&(a.path=e.path);var n=t.addShape("path",{className:I,name:I,attrs:a});return n},update(e,t){this.cfg=e;var a=t.getKeyShape();a._calculateCurve(),a._setTcache(),this.updateShapeStyle(e,t),this.updateLabel(e,t)},afterDraw(e,t){this.drawPlaceholder(e,t),this.drawDragLine(e,t)},afterUpdate(e,t){var a=t.getContainer();this.drawPlaceholder(e,a),this.drawDragLine(e,a)},drawDragLine(e,t){for(var a=t.find((e=>"edge-shape"===e.get("className"))),r=a.attr("path").map((e=>({x:e[1],y:e[2]}))),o=[],i=1;i<r.length-1;i++){var d=r[i-1],s=r[i],c=r[i+1];s.x===d.x&&s.x===c.x||s.y===d.y&&s.y===c.y||o.push(Object(n["a"])(Object(n["a"])({},s),{},{index:i}))}this.removeUnnecessaryLine(o,t);for(var h=1;h<o.length;h++)this.drawSingleLine(o[h-1],o[h],e.id,t)},removeUnnecessaryLine(e,t){var a=t.findAllByName(l["DRAGLINE_NAME"]),n=e.length;a.forEach(((e,a)=>{a>n-2&&t.removeChild(e)}))},removeDragLine(e){var t=e.findAllByName(l["DRAGLINE_NAME"]);t.forEach((t=>e.removeChild(t)))},drawSingleLine(e,t,a,r){var o=e.index,i="drag_line_".concat(a,"_").concat(o,"_").concat(o+1),d=r.findById(i),s=()=>[["M",e.x,e.y],["L",t.x,t.y]],c=()=>Object(n["a"])(Object(n["a"])({},M),{},{cursor:e.x===t.x?"ew-resize":"ns-resize"});d?d.attr(Object(n["a"])({path:s()},c())):r.addShape("path",{name:l["DRAGLINE_NAME"],id:i,attrs:Object(n["a"])({path:s()},c())}).set(l["DRAGLINE_INDEX"],o)},drawPlaceholder(e,t){var a=t.findAllByName(l["EDGE_START_PLACEHOLDER_NAME"])[0],r=t.findAllByName(l["EDGE_END_PLACEHOLDER_NAME"])[0];if(!a){var o=t.addShape("rect",{name:l["EDGE_START_PLACEHOLDER_NAME"],attrs:Object(n["a"])({},N)});o.set("zIndex",C)}if(!r){var i=t.addShape("rect",{name:l["EDGE_END_PLACEHOLDER_NAME"],attrs:Object(n["a"])({},N)});i.set("zIndex",C)}t.sort(),this.updatePlaceholder(e,t)},updatePlaceholder(e,t){var a=e.startPoint,n=e.endPoint,r=t.findAllByName(l["EDGE_START_PLACEHOLDER_NAME"])[0],o=t.findAllByName(l["EDGE_END_PLACEHOLDER_NAME"])[0];r&&r.attr({x:((null===a||void 0===a?void 0:a.x)||0)-.5*w,y:((null===a||void 0===a?void 0:a.y)||0)-.5*w}),o&&o.attr({x:((null===n||void 0===n?void 0:n.x)||0)-.5*w,y:((null===n||void 0===n?void 0:n.y)||0)-.5*w})},setState(e,t,a){var r=a.get("keyShape");if(r){var o=this.options,i=o.style,d=o.stateStyles,s=d[e];s&&(t?r.attr(Object(n["a"])(Object(n["a"])({},i),s)):r.attr(i))}}};i.a.registerEdge(l["EdgeType"].FlowEdge,D,l["EdgeType"].Polyline),i.a.registerCombo(l["ComboType"].FlowCombo,{options:{padding:[0,0,0,0],style:{lineWidth:2,stroke:"#fa3246"}}},l["ComboType"].Rect);var P=a("YO3V"),j=a.n(P),k="anchor_box",T={lineWidth:1,fill:"#ff8406",r:16,opacity:.2},B=10;class _{constructor(){this.graph={},this.group={},this.points=[]}start(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";this.graph=e,this.group=e.getGroup(),this.points=e.getNodes().filter((e=>e.getID()!==t)).reduce(((e,t)=>{var a=t.getAnchorPoints().map((e=>Object(n["a"])(Object(n["a"])({},e),{},{id:t.getID()})));return e.concat(...a)}),[])}move(e,t){var a=this.points.find((a=>{var n=Object(u["getDistance"])(a,{x:e,y:t});return n<B?(this.drawBox(a),!0):(this.hideBox(a),!1)}));return a}end(){var e=this.group.findAllByName(k);e.forEach((e=>{this.group.removeChild(e)}))}getIdByPoint(e){return"".concat(e.id,"_").concat(e.index)}getShapeByPoint(e){return this.group.findById(this.getIdByPoint(e))}drawBox(e){var t=this.group,a=this.getIdByPoint(e),r=t.findById(a),o=Object(n["a"])(Object(n["a"])({},e),T);r?r.attr(o):t.addShape("circle",{name:k,id:a,attrs:o})}hideBox(e){var t=this.getShapeByPoint(e);t&&t.attr({opacity:0})}}var L=_,R=new L,z={edge:null,graphType:"flow",getDefaultCfg(){return{edgeType:l["EdgeType"].FlowEdge,getAnchorPointStateOfSourceNode:()=>l["AnchorPointState"].Enabled,getAnchorPointStateOfTargetNode:()=>l["AnchorPointState"].Enabled}},getEvents(){return{"node:mouseenter":"handleNodeMouseEnter","node:mouseleave":"handleNodeMouseLeave","node:mousedown":"handleNodeMouseDown",mousemove:"handleMouseMove",mouseup:"handleMouseUp"}},isEnabledAnchorPoint(e){var t=e.target;return!!t.get("isAnchorPoint")&&t.get("anchorPointState")===l["AnchorPointState"].Enabled},isNotSelf(e){var t=this.edge,a=e.item;return a.getModel().id!==t.getSource().getModel().id},getTargetNodes(e){var t=this.graph,a=t.getNodes();return a.filter((t=>t.getModel().id!==e))},canFindTargetAnchorPoint(e){return this.isEnabledAnchorPoint(e)&&this.isNotSelf(e)},shouldAddDelegateEdge(e){return this.isEnabledAnchorPoint(e)},shouldAddRealEdge(){var e=this.edge,t=e.getTarget();return!j()(t)},handleNodeMouseEnter(e){var t=this.graph,a=this.getAnchorPointStateOfSourceNode,n=e.item,r=n.getAnchorPoints(),o=[];r.forEach((e=>{o.push(a(n,e))})),n.set("anchorPointsState",o),t.setItemState(n,l["ItemState"].ActiveAnchorPoints,!0)},handleNodeMouseLeave(e){var t=this.graph,a=this.edge,n=e.item;a||(n.set("anchorPointsState",[]),t.setItemState(n,l["ItemState"].ActiveAnchorPoints,!1))},handleNodeMouseDown(e){if(this.shouldBegin(e)&&this.shouldAddDelegateEdge(e)){var t=this.graph,a=this.edgeType,n=this.getAnchorPointStateOfTargetNode,r=e.target,o=e.item,i=o.getModel().id,d=r.get("anchorPointIndex"),s=o.getAnchorPoints()[d];R.start(t,i);var c={id:Object(u["guid"])(),type:a,source:i,sourceAnchor:d,target:{x:e.x,y:e.y}};this.edge=t.addItem(l["ItemType"].Edge,c,!1),t.getNodes().forEach((e=>{if(e.getModel().id!==i){var a=e.getAnchorPoints(),r=[];a.forEach((t=>{r.push(n(o,s,e,t))})),e.set("anchorPointsState",r),t.setItemState(e,l["ItemState"].ActiveAnchorPoints,!0)}}))}},handleMouseMove(e){var t=this.graph,a=this.edge;if(a){var n=R.move(e.x,e.y);if(n){var r=n.id,o=n.index;t.updateItem(a,{target:r,targetAnchor:o},!1)}else t.updateItem(a,{target:{x:e.x,y:e.y},targetAnchor:void 0},!1)}},handleMouseUp(){var e=this.edge,t=this.graph;e&&(R.end(),this.shouldAddRealEdge()?t.pushStack(l["ActionType"].Add,{before:{},after:{edges:[Object(u["getStackData"])(e)]}}):t.removeItem(this.edge,!1),this.edge=null,t.getNodes().forEach((e=>{e.set("anchorPointsState",[]),t.setItemState(e,l["ItemState"].ActiveAnchorPoints,!1)})))}};i.a.registerBehavior(l["BehaviorType"].DragAddEdge,z);var F={graph:{},getEvents(){return{"node:mouseenter":"handleItemMouseenter","edge:mouseenter":"handleItemMouseenter","node:mouseleave":"handleItemMouseleave","edge:mouseleave":"handleItemMouseleave"}},handleItemMouseenter(e){if(e.item){var t=this.graph;t.setItemState(e.item,l["ItemState"].Active,!0)}},handleItemMouseleave(e){var t=this.graph;t.setItemState(e.item,l["ItemState"].Active,!1)}};i.a.registerBehavior(l["BehaviorType"].HoverItem,F);var X=a("/7QA"),U={getDefaultCfg(){return{item:null,multiple:!0,keydown:!1,keyCode:17}},getEvents(){return{"edge:click":"handleItemClick","node:dblclick":"handleItemDbClick","edge:dblclick":"handleItemDbClick","canvas:click":"handleCanvasClick",keydown:"handleKeyDown",keyup:"handleKeyUp"}},handleItemClick(e){var t=e.item;if(t){this.item=t;var a=this.graph,n=null===t||void 0===t?void 0:t.hasState(l["ItemState"].Selected);this.multiple&&this.keydown?a.setItemState(t,l["ItemState"].Selected,!n):(Object(u["clearSelectedState"])(a,(e=>e!==t)),n||a.setItemState(t,l["ItemState"].Selected,!0))}},handleItemDbClick(e){var t=e.item;if(t){var a,n,r=this.graph,o=X["Instance"].ratio,i=t.getContainer(),d=t.getModel(),s=d.label;if(t.getType()===l["ItemType"].Node){var c=t.getBBox(),h=c.width,g=c.height,p=c.x,f=c.y,m=20;a={width:(h-m)*o,minHeight:(g+m)*o,left:(p+.5*m)*o,top:(f-.5*m)*o}}else{var y=t.getKeyShape().getPoint(.5),v=y.x,b=y.y;n=i.findAllByName("text-bg-shape")[0];var S=20,E=10,O=20,x=n&&n.getBBox().width||S+O,A=E+O;a={minWidth:S+O,height:E+O,left:v*o-x/2,top:b*o-A/2}}var w="string"===typeof s?s:null===s||void 0===s?void 0:s.text;Object(u["showLabelEditor"])(w,a,(e=>{r.updateItem(t,{label:e},s!==e)}))}},handleCanvasClick(e){var t=this.graph;this.item=null,Object(u["removeAllCombo"])(t),Object(u["clearSelectedState"])(t)},handleKeyDown(e){this.keydown=(e.keyCode||e.which)===this.keyCode},handleKeyUp(){this.keydown=!1}};i.a.registerBehavior(l["BehaviorType"].ClickItem,U);var Y={graph:{},attrs:{},item:{},isResize:!1,point:[],getDefaultCfg(){return{}},getEvents(){return{"node:mousedown":"handleNodeMouseDown",mousemove:"handleMouseMove",mouseup:"handleMouseUp"}},handleNodeMouseDown(e){var t=e.target,a=e.item;if(t){var n=t.get("name");n===l["CONTROL_POINT_NAME"]&&(this.isResize=!0,this.attrs=t.get("canvasBBox"),this.point=t.get("point"),this.item=a,this.itemModel=a.getBBox(),this.stackData=Object(u["getStackData"])(a))}},handleMouseMove(e){if(this.isResize){var t,a,r=this.point,o=this.attrs,i=this.item,d=this.itemModel,s=this.graph,c=o.x,h=o.y,g=d,p=g.width,f=g.height,m=g.x,y=g.y,v=e.canvasX,b=e.canvasY,S=i.getModel(),E=S.type,O=X["Instance"].ratio,x=(v-c)*O,A=(b-h)*O;switch(E){case l["NodeType"].FlowCircle:t=[p+(r[0]||-1)*x,f+(r[1]||-1)*A],a={x:m+(r[0]-1)*x*-1,y:y+(r[1]-1)*A*-1};break;default:t=[p+(r[0]||-1)*x,f+(r[1]||-1)*A],a={x:m+(r[0]-1)*x*-1,y:y+(r[1]-1)*A*-1};break}s.updateItem(i,Object(n["a"])({size:t},a),!1),Object(u["showTooltip"])("W: ".concat(parseInt(t[0]),"  H:").concat(parseInt(t[1])),i)}},handleMouseUp(){this.isResize&&(this.isResize=!1,Object(u["hideTooltip"])(),X["Instance"].graph.pushStack(l["ActionType"].Update,{before:{nodes:[this.stackData]},after:{nodes:[Object(u["getStackData"])(this.item)]}}))}};i.a.registerBehavior(l["BehaviorType"].DragResizeNode,Y);var W=a("TEuP"),G=new W["default"],H={graph:{},draging:!1,nodes:[],edges:[],origin:{x:0,y:0},points:[],getEvents(){return{"node:dragstart":"handleNodeDragStart","node:drag":"handleNodeDrag","node:dragend":"handleNodeDragend"}},handleNodeDragStart(e){var t=e.item,a=e.target,n=e.x,r=e.y,o=this.graph;if(t&&!t.destroyed){var i=a.get("name");if(![l["ANCHOR_POINT_NAME"],l["CONTROL_POINT_NAME"]].includes(i)){if(!this.draging){o.setItemState(t,l["ItemState"].Selected,!0),this.draging=!0,this.origin={x:n,y:r},this.nodes=o.findAllByState(l["ItemType"].Node,l["ItemState"].Selected);var d=this.nodes.reduce(((e,t)=>(t.getEdges().forEach((t=>{e[t.getID()]=t})),e)),{});this.edges=Object.keys(d).map((e=>d[e])),this.points=this.nodes.reduce(((e,t)=>{var a=t.getModel();return e[a.id||""]={x:a.x,y:a.y},e}),{});var s={nodes:[],edges:[],combos:[]};this.nodes.forEach((e=>{s.nodes.push(Object(u["getStackData"])(e))})),this.edges.forEach((e=>{s.edges.push(Object(u["getStackData"])(e))})),this.beforeData=s,this.edges.forEach((e=>{o.updateItem(e,{nowPath:null},!1)}))}G.start(o)}}},handleNodeDrag(e){var t=e.item,a=e.x,n=e.y;if(this.draging&&t){var r=this.graph,o=this.origin,i=this.nodes,d=(this.edges,this.points),s=t.getID(),c=i.filter((e=>e.getID()!==s)),h=a-o.x,l=n-o.y;i.forEach((e=>{var t=e.getID(),a=d[t],n={x:a.x+h,y:a.y+l};r.updateItem(e,n,!1)})),c.length}Object(u["showTooltip"])("X:".concat(Math.floor(a),"  Y:").concat(Math.floor(n)),t),1===this.nodes.length&&G.move(t)},handleNodeDragend(e){var t=e.item;if(this.draging&&t){var a=this.graph,n=this.beforeData,r={nodes:[],edges:[],combos:[]};this.nodes.forEach((e=>{r.nodes.push(Object(u["getStackData"])(e))})),this.edges.forEach((e=>{r.edges.push(Object(u["getStackData"])(e))}));var o={before:n,after:r};a.pushStack(l["ActionType"].Update,o),a.setItemState(t,l["ItemState"].Selected,!1),this.draging=!1,this.nodes=[],this.edges=[],this.points=[],this.beforeData=null}Object(u["hideTooltip"])(),G.end()}};i.a.registerBehavior(l["BehaviorType"].MoveNode,H);var Z={isControl:!1,getEvents(){return{keydown:"handleKeyDown",keyup:"handleKeyUp"}},handleKeyDown(e){switch(e.preventDefault(),console.log(e.keyCode),e.keyCode){case l["KeyCode"].Control:this.isControl=!0;break;case l["KeyCode"].Z:this.isControl&&X["Instance"].undo();break;case l["KeyCode"].Y:this.isControl&&X["Instance"].redo();break;case l["KeyCode"].Backspace:X["Instance"].deleteSelected();break;case l["KeyCode"].C:this.isControl&&X["Instance"].copy();break;case l["KeyCode"].V:this.isControl&&X["Instance"].paste();break;case l["KeyCode"].Add:case l["KeyCode"].NumberAdd:this.isControl&&Object(u["zoomIn"])();break;case l["KeyCode"].Minus:case l["KeyCode"].NumberMinus:this.isControl&&Object(u["zoomOut"])();break;case l["KeyCode"].Zero:case l["KeyCode"].NumberZero:this.isControl&&Object(u["zoomZero"])()}},handleKeyUp(e){switch(e.preventDefault(),e.keyCode){case l["KeyCode"].Control:this.isControl=!1;break}}};i.a.registerBehavior(l["BehaviorType"].ShortCuts,Z);var K=new L,q={graph:{},edge:{},moving:"",getEvents(){return{"edge:mousedown":"handleEdgeMouseDown",mousemove:"handleMouseMove",mouseup:"handleMouseUp"}},handleMouseUp(){var e=this.graph,t=this.edge,a=this.beforeData,n=this.moving;if(n&&t){K.end();var r=Object(u["getStackData"])(t),o={before:{edges:[a]},after:{edges:[r]}};JSON.stringify(a)!==JSON.stringify(r)&&e.pushStack(l["ActionType"].Update,o),this.moving="",this.edge=void 0,this.beforeData=null}},handleMouseMove(e){var t=e.x,a=e.y,n=(e.target,e.item,this.graph),r=this.edge,o=this.moving;if(o&&r){var i={},d=K.move(t,a);if(d){var s=d.id,c=d.index;i[o]=s,i["".concat(o,"Anchor")]=c}else i[o]={x:t,y:a};i.nowPath=null,n.updateItem(r,i,!1)}},handleEdgeMouseDown(e){var t=e.target,a=e.item,n=this.graph,r=t.get("name"),o=[l["EDGE_START_PLACEHOLDER_NAME"],l["EDGE_END_PLACEHOLDER_NAME"]],i=o.indexOf(r);if(!this.moving&&-1!==i&&a){this.edge=a,this.beforeData=Object(u["getStackData"])(a),this.moving=0===i?"source":"target";var d=a.get(0===i?"target":"source");K.start(n,d)}}};i.a.registerBehavior(l["BehaviorType"].DragMoveEdge,q);var J={graph:{},moving:!1,pathIndex:0,getEvents(){return{"edge:mousedown":"handleEdgeMouseDown",mousemove:"handleMouseMove",mouseup:"handleMouseUp"}},handleEdgeMouseDown(e){var t=e.target,a=e.item,n=t.get("name");if(n===l["DRAGLINE_NAME"]&&!this.moving){this.beforeData=JSON.stringify(Object(u["getStackData"])(a));var r=a.getKeyShape();this.moving=!0,this.edge=a,this.nowPath=r.attr("path"),this.pathIndex=t.get(l["DRAGLINE_INDEX"]),this.isX="ew-resize"===t.attr("cursor")}},handleMouseMove(e){var t=e.x,a=e.y,n=this.edge,r=this.graph,o=this.nowPath,i=this.moving,d=this.pathIndex,s=this.isX;if(i&&n&&o){var c=s?1:2,h=s?t:a;o[d][c]=h,o[d+1][c]=h,r.updateItem(n,{nowPath:o},!1)}},handleMouseUp(){var e=this.graph,t=this.nowPath,a=this.beforeData;if(this.moving){var r=JSON.parse(a||"");if(JSON.stringify(r.nowPath)!==JSON.stringify(t)){var o={before:{edges:[Object(n["a"])({},r)]},after:{edges:[Object(n["a"])(Object(n["a"])({},r),{},{nowPath:t})]}};e.pushStack(l["ActionType"].Update,o)}this.moving=!1,this.edge=void 0,this.nowPath=void 0}}};i.a.registerBehavior(l["BehaviorType"].MovePolyline,J)},mwqp:function(e,t,a){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var o=s(a("5vP7"));Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})),a("kLXQ"),a("N3+D");var i=a("q9vq");function d(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,t&&t.set(e,a),a}Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=o.default;t.default=c},q9vq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragItem=void 0;var n=s(a("q1tI")),r=a("/7QA"),o=a("8A8B"),i=a("k/Of"),d=s(a("TEuP"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){var t=v();return function(){var a,n=b(e);if(t){var r=b(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m(this,a)}}function m(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var S=new d.default,E=function(e){g(a,e);var t=f(a);function a(e){var n;return h(this,a),n=t.call(this,e),n.node={},n.beforeData={},n.handleMouseDown=function(e){r.Instance.editable&&(n.beforeData=r.Instance.getData(),n.node=r.Instance.addNode(n.props.type),S.start(r.Instance.graph),n.handleMouseMove(e),document.addEventListener("mousemove",n.handleMouseMove),document.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseMove=function(e){var t=n.getPosition(e),a=t.x,o=t.y;r.Instance.moveNode(n.node,a,o),S.move(n.node)},n.handleMouseUp=function(){var e=(0,o.getStackData)(n.node);r.Instance.graph.pushStack(i.ActionType.Add,{before:{},after:{nodes:[e]}}),document.removeEventListener("mousemove",n.handleMouseMove),document.removeEventListener("mouseup",n.handleMouseUp),S.end()},n.getPosition=function(e){var t=r.Instance.calculatePosition(e.clientX,e.clientY),a=t.x,o=t.y,i=n.node.getBBox(),d=i.width,s=i.height;return{x:a-.5*d,y:o-.5*s}},n}return u(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.style,r=e.children;return n.default.createElement("div",{className:t,style:a,onMouseDown:this.handleMouseDown},r)}}]),a}(n.default.PureComponent);t.DragItem=E},sFfT:function(e,t,a){},zSLb:function(e,t,a){}}]);